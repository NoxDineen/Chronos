{% extends "chronos/base.html" %}

{% block content %} 

	<h4>{{ mname }} {{ year }}</h4>

	<div id="month">
	    <table width="95%">

	    <tr valign="top">
	        <td class="empty">Mon</td>
	        <td class="empty">Tue</td>
	        <td class="empty">Wed</td>
	        <td class="empty">Thu</td>
	        <td class="empty">Fri</td>
	        <td class="empty">Sat</td>
	        <td class="empty">Sun</td>
	    </tr>

	    {% for week in month_days %}
	        <tr valign="top">
	        {% for day, assignments, current in week %}

	            <!-- TD style: empty | day | current; onClick handler and highlight  -->
	            <td class= {% if day == 0 %}"empty"{% endif %}
	            {% if day != 0 and not current %}"day ui-widget-header"{% endif %}
	            {% if day != 0 and current %}"current ui-widget-header"{% endif %}
	            {% if day != 0 %}
	                onMouseOver="this.bgColor='#eeeeee';"
	                onMouseOut="this.bgColor='white';"
	            {% endif %} >

	            {% if day != 0 %}
	                <p class="date">{{ day }}</p>
	                <p class="assignments">{% for assignment in assignments %}
	                    <br />
	                    <b>{{ assignment.person }}</b>:<br /> {{ assignment.role }}
	                {% endfor %}</p>
	            {% endif %}
	            </td>
	        {% endfor %}
	        </tr>
	    {% endfor %}
	    </table>

	    <div class="clear"></div>
	</div>

{% endblock content %}

	{% block sidebar %} 

	{% comment %}
	Login form needs to go here. Drag/drop functionality needs to be limited to only those logged in with manager or higher authentication.
	{% endcomment %}
	
		{% if user.is_staff %} {% comment %}This is a shitty way to do this, since an unauthenticated user can still hit the AJAX endpoint I'll be adding and thus create an Assignment without authenticating.{% endcomment %}

		<div id="is_support" class="ui-widget-content">
		<h3>Team Members</h3>
		<ul> {% for person in support_team %}
			<li>{{ person.first_name }} {{ person.last_name }}</li>
			{% endfor %}
		</ul>
		</div>

		<div id="is_not_support" class="ui-widget-content ui-corner-all">
		<h4>Bonus Team Members</h4>
		<ul> {% for person in not_support_team %}
			<li>{{ person.first_name }} {{ person.last_name }}</li>
			{% endfor %}
		</ul>
		{% endif %}
		</div>

	{% endblock sidebar %} 
